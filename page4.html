<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no" />
    <title> page 4 </title>
    <script src="https://s1.pstatp.com/cdn/expire-1-M/jquery/2.1.4/jquery.min.js" type="application/javascript">
    </script>
    <script src="https://s0.pstatp.com/cdn/expire-1-M/vue/2.6.10/vue.min.js" type="application/javascript"></script>
    <link href="https://s2.pstatp.com/cdn/expire-1-M/twitter-bootstrap/3.4.0/css/bootstrap.min.css" type="text/css"
        rel="stylesheet" />
    <script src="https://s1.pstatp.com/cdn/expire-1-M/twitter-bootstrap/3.4.0/js/bootstrap.min.js"
        type="application/javascript"></script>
    <script src="https://s1.pstatp.com/cdn/expire-1-M/layer/2.3/layer.js" type="application/javascript"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            text-decoration: none;
            list-style-type: none;
        }

        body {
            background-color: rgb(85, 83, 72);
            color: blanchedalmond;
        }
    </style>
</head>

<body>
    <h1> page 4 </h1>



    <br><br><br><br><br><br><br><br><br><br>


    <h1>page 3 ~</h1>
    <h3>Add to localStorage</h3>

    <div style=" width: 100%;">
        <button onclick="left_button()" style="width: 49%; height: 66px;" class="btn btn-info"
            id="left_button">left</button>
        <button onclick="right_button()" style="width: 49%;height: 66px; float: right;" class="btn btn-info"
            id="right_button">right</button>
    </div>

    <p id="index_num" style="font-size: 22px;"></p>
    <h1 id="english" style="font-weight: 600;">apple</h1>
    <button onclick="show_chinese()" style="width: 100%; height: 66px;" class="btn btn-success">show</button>
    <h1 id="chinese" style="opacity: 0; color: aqua;  font-weight: 600; ">苹果</h1>
    <br>
    <div>
        <button class="btn btn-success" id="apple__" onclick="read_it()">playing...</button>
    </div>
    <script>
        function read_it() {
            let word = document.getElementById("english").innerText;
            var url = " http://dict.youdao.com/dictvoice?audio=" + word + "&type=2";
            var audio = new Audio(url);
            audio.load();
            audio.play();
        }
    </script>
    <br>
    <br>
    <br>
    <br>
    <label style="font-size: 20px;">
        <input type="checkbox" id="toggle-button" name="switch"> 是否发音
    </label>
    <br><br>
    <br><br>
    <br><br>
    <button class="btn btn-danger " style="width: 100%; height: 45px;"
        onclick="Del_this_word()">Delete_this_word</button>


    <br><br><br><br><br>
    <br><br><br><br><br>
    <br><br><br><br><br>
    <br><br><br><br><br>


    <p>localStorage.length</p>
    <h3 style="font-size: 30px;" id="localStorage_length"></h3>



    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>






</body>
<script>



    // localStorage.setItem('aaaaaaaaaa', '111111111111');

    var array_word = [];
    for (let i = 0; i < localStorage.length; i++) {
        let localStorage_key = localStorage.key(i)
        if (localStorage_key !== "page_size" && localStorage_key !== "aaaaaaaaaa" && localStorage_key !== "word_index") {
            let localStorage_value = localStorage.getItem(localStorage_key);
            console.log(localStorage_key);
            console.log(localStorage_value);
            array_word.push({
                "key": localStorage_key,
                "value": localStorage_value
            });
        }
    }

    console.log(array_word);
    var index = -2;

    function set_eng_chi(index) {
        let eng = array_word[index].key;
        let chi = array_word[index].value;
        document.getElementById("index_num").innerText = index;
        document.getElementById("english").innerText = eng;
        document.getElementById("chinese").innerText = chi;
        let onoffswitch = document.getElementById("toggle-button");
        if (onoffswitch.checked) {
            // 表示 发音
            var url = " http://dict.youdao.com/dictvoice?audio=" + eng + "&type=2";
            var audio = new Audio(url);
            audio.load();
            audio.play();
        }
    }

    function left_button() {
        index--;
        set_eng_chi(index);
    }
    function right_button() {
        index++;
        set_eng_chi(index);
    }

    function Del_this_word() {
        let eng = document.getElementById("english").innerText;
        console.log(eng);
        localStorage.removeItem(eng);
    }

    function show_chinese() {
        $("#chinese").css({ "opacity": "1" });
        setTimeout(() => {
            $("#chinese").css({ "opacity": "0" });
        }, 200);
    }


    document.getElementById("localStorage_length").innerText = localStorage.length;





</script>

</html>
